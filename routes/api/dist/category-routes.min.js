"use strict";var express=require("express"),router=express.Router(),_require=require("../../models"),Category=_require.Category,Product=_require.Product;router.get("/",function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Category.findAll({include:[{model:Product,attributes:["id","product_name","price","stock","category_id"]}]}));case 3:if(t=e.sent){e.next=7;break}return r.status(404).json({message:"No categories found"}),e.abrupt("return");case 7:r.json(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),r.status(500).json({message:"Server Error"});case 14:case"end":return e.stop()}},null,null,[[0,10]])}),router.get("/:id",function(r,t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Category.findOne({where:{id:r.params.id},include:[{model:Product,attributes:["id","product_name","price","stock","category_id"]}]}));case 3:if(n=e.sent){e.next=7;break}return t.status(404).json({message:"No categories found"}),e.abrupt("return");case 7:t.json(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),t.status(500).json({message:"Server Error"});case 14:case"end":return e.stop()}},null,null,[[0,10]])}),router.post("/",function(r,t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Category.create({category_name:r.body.category_name}));case 3:n=e.sent,t.json(n),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),t.status(500).json({message:"Server Error"});case 11:case"end":return e.stop()}},null,null,[[0,7]])}),router.put("/:id",function(r,t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Category.update(r.body,{where:{id:r.params.id}}));case 3:if(e.sent[0]){e.next=7;break}return t.status(404).json({message:"No category found with this id"}),e.abrupt("return");case 7:t.json({message:"Category updated"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),t.status(500).json({message:"Server Error"});case 14:case"end":return e.stop()}},null,null,[[0,10]])}),router.delete("/:id",function(r,t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Category.destroy({where:{id:r.params.id}}));case 3:if(e.sent){e.next=7;break}return t.status(404).json({message:"No category found with that id"}),e.abrupt("return");case 7:t.json({message:"Category deleted"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),t.status(500).json({message:"Server Error"});case 14:case"end":return e.stop()}},null,null,[[0,10]])}),module.exports=router;
//# sourceMappingURL=category-routes.min.js.map
